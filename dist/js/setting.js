(()=>{"use strict";var t={858:(t,e,i)=>{i.r(e)},399:(t,e,i)=>{i.r(e)},266:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.http=void 0,e.http={httpGet:async t=>fetch(t,{method:"get",headers:{"content-type":"application/json"},credentials:"include"}),httpPost:async(t,e)=>fetch(t,{method:"post",body:e,credentials:"include",headers:{"content-type":"application/json"}})}},631:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.honeySwitch=void 0,e.honeySwitch={themeColor:"rgb(2,157,208)",init:function(){$("[switch]").append("<span class='slider'></span>")},showOn:function(t){if($(t).removeClass("switch-off").addClass("switch-on"),e.honeySwitch.themeColor){var i=e.honeySwitch.themeColor;$(t).css({"border-color":i,"box-shadow":i+" 0px 0px 0px 16px inset","background-color":i})}},showOff:function(t){$(t).removeClass("switch-on").addClass("switch-off"),$(".switch-off").css({"border-color":"#dfdfdf","box-shadow":"rgb(223, 223, 223) 0px 0px 0px 0px inset","background-color":"rgb(255, 255, 255)"})}}},27:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.extensionOperation=e.getCurrentTab=e.setConfig=e.getConfig=void 0;const n=i(266),o=i(597);function s(t){chrome.storage.sync.set({chromeConfig:JSON.stringify(t)})}e.getConfig=async function(){let t=await chrome.storage.sync.get(["chromeConfig"]);return JSON.parse(t.chromeConfig)},e.setConfig=s,e.getCurrentTab=async function(){let[t]=await chrome.tabs.query({active:!0,currentWindow:!0});return t},e.extensionOperation={userBilibiliInterfaceOnPage:async(t,e)=>{if(e.url.indexOf("bilibili.com")>-1&&t.signIn){let t=await chrome.cookies.get({url:"https://www.bilibili.com",name:"SESSDATA"}),i=await chrome.cookies.get({url:"https://www.bilibili.com",name:"bili_jct"});chrome.scripting.executeScript({target:{tabId:e.id},func:o.script.doUserBilibiliInterface,args:[t.value,i.value]})}},dark:(t,e)=>{e.url.indexOf("bilibili.com")>-1&&t.isDark&&chrome.scripting.insertCSS({files:["dist/css/bilibili_dark_inject.css"],target:{tabId:e.id}})},video:(t,e)=>{e.url.indexOf("bilibili.com/video")>-1&&t.videoImg&&chrome.scripting.executeScript({target:{tabId:e.id},func:o.script.doBilibiliGetImg})},signIn:async t=>{if(t.signInDay!=(new Date).toDateString()&&t.signIn){let i={type:"basic",iconUrl:"../../img/favicon128-128.png",title:"bilibili小插件 by淺い空",message:"已完成B站每日签到！！"};if(null==await chrome.cookies.get({url:"https://www.bilibili.com",name:"SESSDATA"}))i.message="没有登录b站，登陆后才可以使用每日签到哦！！";else{let o=await n.http.httpGet("https://www.bilibili.com"),c=await n.http.httpGet("https://api.live.bilibili.com/xlive/web-ucenter/v1/sign/DoSign");if(o.status>399||c.status>399)i.message="网络错误，每日签到失败了啊！！";else{t.signInDay=(new Date).toDateString();let i=(new Date).getTime(),n=i-(i+288e5)%864e5+864e5,o=setTimeout(e.extensionOperation.signIn,n-i);t.signInDay=o,s(t)}}chrome.notifications.create(null,i)}}}},597:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.script=void 0,e.script={doUserBilibiliInterface:(t,e)=>window.userBilibiliInterface(t,e),doBilibiliGetImg:()=>window.bilibiliGetImg()}}},e={};function i(n){var o=e[n];if(void 0!==o)return o.exports;var s=e[n]={exports:{}};return t[n](s,s.exports,i),s.exports}i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{i(399),i(858);const t=i(631),e=i(27);function n(e,i,n){$(e).click((function(){if(!$(this).hasClass("switch-disabled"))if($(this).hasClass("switch-on"))$(this).removeClass("switch-on").addClass("switch-off"),$(".switch-off").css({"border-color":"#dfdfdf","box-shadow":"rgb(223, 223, 223) 0px 0px 0px 0px inset","background-color":"rgb(255, 255, 255)"}),"function"==typeof n&&n();else{if($(this).removeClass("switch-off").addClass("switch-on"),t.honeySwitch.themeColor){var e=t.honeySwitch.themeColor;$(this).css({"border-color":e,"box-shadow":e+" 0px 0px 0px 16px inset","background-color":e})}"function"==typeof i&&i()}}))}t.honeySwitch.init(),async function(){let i=await(0,e.getConfig)();i.popupSearch?t.honeySwitch.showOn($("#popupSearchBtn")):t.honeySwitch.showOff($("#popupSearchBtn")),i.contextMenu?t.honeySwitch.showOn($("#contextMenuSearchBtn")):t.honeySwitch.showOff($("#contextMenuSearchBtn")),i.isDark?t.honeySwitch.showOn($("#darkBtn")):t.honeySwitch.showOff($("#darkBtn")),i.videoImg?t.honeySwitch.showOn($("#getImg")):t.honeySwitch.showOff($("#getImg")),i.omnibox?t.honeySwitch.showOn($("#omniboxSearchBtn")):t.honeySwitch.showOff($("#omniboxSearchBtn")),i.signIn?t.honeySwitch.showOn($("#signInBtn")):t.honeySwitch.showOff($("#signInBtn")),i.easyDark?t.honeySwitch.showOn($("#easyDarkBtn")):t.honeySwitch.showOff($("#easyDarkBtn"))}(),n("#popupSearchBtn",(async function(){let t=await(0,e.getConfig)();t.popupSearch=!0,(0,e.setConfig)(t)}),(async function(){let t=await(0,e.getConfig)();t.popupSearch=!1,(0,e.setConfig)(t)})),n("#contextMenuSearchBtn",(async function(){let t=await(0,e.getConfig)();t.contextMenu=!0,(0,e.setConfig)(t)}),(async function(){let t=await(0,e.getConfig)();t.contextMenu=!1,(0,e.setConfig)(t)})),n("#darkBtn",(async function(){let t=await(0,e.getConfig)();t.isDark=!0,(0,e.setConfig)(t)}),(async function(){let t=await(0,e.getConfig)();t.isDark=!1,(0,e.setConfig)(t)})),async function(){n("#getImg",(async function(){let t=await(0,e.getConfig)();t.videoImg=!0,(0,e.setConfig)(t)}),(async function(){let t=await(0,e.getConfig)();t.videoImg=!1,(0,e.setConfig)(t)}))}(),n("#signInBtn",(async function(){let t=await(0,e.getConfig)();e.extensionOperation.signIn(t),t.signIn=!0,(0,e.setConfig)(t)}),(async function(){let t=await(0,e.getConfig)();t.signIn=!1,window.clearTimeout(t.timeOut),(0,e.setConfig)(t)})),n("#easyDarkBtn",(async function(){let t=await(0,e.getConfig)();t.easyDark=!0,(0,e.setConfig)(t)}),(async function(){let t=await(0,e.getConfig)();t.easyDark=!1,(0,e.setConfig)(t)}))})()})();