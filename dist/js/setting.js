(()=>{"use strict";var e={858:(e,t,n)=>{n.r(t)},399:(e,t,n)=>{n.r(t)},238:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SignIn=void 0;const i=n(165);async function o(){let e=await(0,i.getConfig)();if(e.signInDay!=(new Date).toDateString()&&e.signIn){let t={type:"basic",iconUrl:"img/favicon128-128.png",title:"bilibili小插件 by淺い空",message:"已完成B站每日签到！！"};null==await chrome.cookies.get({url:"https://www.bilibili.com",name:"SESSDATA"})?t.message="没有登录b站，登陆后才可以使用每日签到哦！！":($.get("https://www.bilibili.com"),$.get("https://api.live.bilibili.com/xlive/web-ucenter/v1/sign/DoSign"),e.signInDay=(new Date).toDateString()),chrome.notifications.create(null,t);let n=(new Date).getTime(),s=setTimeout(o,n-(n+288e5)%864e5+864e5-n);e.signInDay=s,(0,i.setConfig)(e)}}!async function(){await async function(){console.log("init"),null==(await chrome.storage.sync.get(["chromeConfig"])).chromeConfig&&(0,i.setConfig)({isDark:!1,contextMenu:!0,popupSearch:!0,videoImg:!0,signIn:!0,signInDay:"",timeOutId:0,easyDark:!1})}(),chrome.tabs.onUpdated.addListener((async(e,t,n)=>{let o=await(0,i.getConfig)();if(n.url.indexOf("bilibili.com")>-1){if(o.signIn){let e=await chrome.cookies.get({url:"https://www.bilibili.com",name:"SESSDATA"}),t=await chrome.cookies.get({url:"https://www.bilibili.com",name:"bili_jct"});chrome.tabs.executeScript(null,{code:'userBilibiliInterface("'+e+'","'+t+'");'})}o.isDark&&o.easyDark?chrome.tabs.executeScript(null,{code:"bilibiliDarkStart(true)"}):o.isDark&&chrome.tabs.executeScript(null,{code:"bilibiliDarkStart(false)"})}n.url.indexOf("bilibili.com/video")>-1&&o.videoImg})),chrome.omnibox.onInputEntered.addListener((async function(e){let t=await chrome.tabs.getSelected();chrome.tabs.update(t.id,{url:"https://search.bilibili.com/all?keyword="+e+"&from_source=nav_suggest_new"})})),(await(0,i.getConfig)()).contextMenu&&chrome.contextMenus.create({title:"使用bilibili搜索：%s",contexts:["selection"],onclick:function(e){chrome.tabs.create({url:"https://search.bilibili.com/all?keyword="+encodeURI(e.selectionText)+"&from_source=nav_suggest_new",active:!0})}}),o()}(),t.SignIn=o},165:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setConfig=t.getConfig=void 0,t.getConfig=async function(){let e=await chrome.storage.sync.get(["chromeConfig"]);return JSON.parse(e.chromeConfig)},t.setConfig=function(e){chrome.storage.sync.set({chromeConfig:JSON.stringify(e)})}},631:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.honeySwitch=void 0,t.honeySwitch={themeColor:"rgb(2,157,208)",init:function(){$("[switch]").append("<span class='slider'></span>")},showOn:function(e){if($(e).removeClass("switch-off").addClass("switch-on"),t.honeySwitch.themeColor){var n=t.honeySwitch.themeColor;$(e).css({"border-color":n,"box-shadow":n+" 0px 0px 0px 16px inset","background-color":n})}},showOff:function(e){$(e).removeClass("switch-on").addClass("switch-off"),$(".switch-off").css({"border-color":"#dfdfdf","box-shadow":"rgb(223, 223, 223) 0px 0px 0px 0px inset","background-color":"rgb(255, 255, 255)"})}}}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{n(399),n(858);const e=n(631),t=n(238),i=n(165);function o(t,n,i){$(t).click((function(){if(!$(this).hasClass("switch-disabled"))if($(this).hasClass("switch-on"))$(this).removeClass("switch-on").addClass("switch-off"),$(".switch-off").css({"border-color":"#dfdfdf","box-shadow":"rgb(223, 223, 223) 0px 0px 0px 0px inset","background-color":"rgb(255, 255, 255)"}),"function"==typeof i&&i();else{if($(this).removeClass("switch-off").addClass("switch-on"),e.honeySwitch.themeColor){var t=e.honeySwitch.themeColor;$(this).css({"border-color":t,"box-shadow":t+" 0px 0px 0px 16px inset","background-color":t})}"function"==typeof n&&n()}}))}e.honeySwitch.init(),async function(){let t=await(0,i.getConfig)();t.popupSearch?e.honeySwitch.showOn($("#popupSearchBtn")):e.honeySwitch.showOff($("#popupSearchBtn")),t.contextMenu?e.honeySwitch.showOn($("#contextMenuSearchBtn")):e.honeySwitch.showOff($("#contextMenuSearchBtn")),t.isDark?e.honeySwitch.showOn($("#darkBtn")):e.honeySwitch.showOff($("#darkBtn")),t.videoImg?e.honeySwitch.showOn($("#getImg")):e.honeySwitch.showOff($("#getImg")),t.omnibox?e.honeySwitch.showOn($("#omniboxSearchBtn")):e.honeySwitch.showOff($("#omniboxSearchBtn")),t.signIn?e.honeySwitch.showOn($("#signInBtn")):e.honeySwitch.showOff($("#signInBtn")),t.easyDark?e.honeySwitch.showOn($("#easyDarkBtn")):e.honeySwitch.showOff($("#easyDarkBtn"))}(),o("#popupSearchBtn",(async function(){let e=await(0,i.getConfig)();e.popupSearch=!0,(0,i.setConfig)(e)}),(async function(){let e=await(0,i.getConfig)();e.popupSearch=!1,(0,i.setConfig)(e)})),o("#contextMenuSearchBtn",(async function(){let e=await(0,i.getConfig)();e.contextMenu=!0,(0,i.setConfig)(e)}),(async function(){let e=await(0,i.getConfig)();e.contextMenu=!1,(0,i.setConfig)(e)})),o("#darkBtn",(async function(){let e=await(0,i.getConfig)();e.isDark=!0,(0,i.setConfig)(e)}),(async function(){let e=await(0,i.getConfig)();e.isDark=!1,(0,i.setConfig)(e)})),async function(){o("#getImg",(async function(){let e=await(0,i.getConfig)();e.videoImg=!0,(0,i.setConfig)(e)}),(async function(){let e=await(0,i.getConfig)();e.videoImg=!1,(0,i.setConfig)(e)}))}(),o("#signInBtn",(async function(){let e=await(0,i.getConfig)();(0,t.SignIn)(),e.signIn=!0,(0,i.setConfig)(e)}),(async function(){let e=await(0,i.getConfig)();e.signIn=!1,window.clearTimeout(e.timeOut),(0,i.setConfig)(e)})),o("#easyDarkBtn",(async function(){let e=await(0,i.getConfig)();e.easyDark=!0,(0,i.setConfig)(e)}),(async function(){let e=await(0,i.getConfig)();e.easyDark=!1,(0,i.setConfig)(e)}))})()})();